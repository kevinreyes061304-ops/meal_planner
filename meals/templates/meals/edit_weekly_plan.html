{% extends 'meals/base.html' %}
{% block title %}Edit Weekly Meal Plan{% endblock %}
{% block content %}
<div class="page-header">
    <h1>{% include 'atoms/icon.html' with name='fa-calendar-week' %} Edit Weekly Meal Plan</h1>
    <p class="mb-0">Week of {{ start_of_week|date:"F d, Y" }}</p>
</div>
<form method="post">
    {% csrf_token %}
    {% include 'organisms/weekly-planner.html' with formset=formset week_dates=week_dates %}
    <div class="row mb-4">
        <div class="col-12 text-center">
            {% include 'atoms/button.html' with text='Save Weekly Plan' icon='fa-save' type='submit' style='primary' class='btn-lg me-2' %}
            <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary btn-lg">
                {% include 'atoms/icon.html' with name='fa-times' %} Cancel
            </a>
        </div>
    </div>
</form>
{% endblock %}
{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const recipeSelects = document.querySelectorAll('select[name*="recipe"]');
        recipeSelects.forEach(select => {
            if (select.options[0].value === '') {
                select.options[0].text = 'Select a recipe...';
            }
        });
    });
</script>
{% endblock %}
